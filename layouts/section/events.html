{{ define "main" }}
<main class="mw8 center ph3 pv4">
  <h1 class="f2">Events</h1>

  {{/* 用全站 RegularPages 过滤出 Section=events 的内容，比 .Pages 稳 */}}
  {{ $events := where .Site.RegularPages "Section" "events" }}

  {{ if eq (len $events) 0 }}
    <p class="mt4 gray">暂无活动。</p>
  {{ else }}
    <div class="cf nl2 nr2">
      {{ range $events.ByDate.Reverse }}
      <article class="fl w-100 w-50-m w-33-l pa2">
        <a class="db no-underline shadow-1 grow br3 bg-white" href="{{ .RelPermalink }}">
          {{ with .Params.banner }}
            <img class="w-100 br3 br--top" src="{{ . }}" alt="{{ $.Title }}">
          {{ end }}
          <div class="pa3">
            <h2 class="f4 mt0 mb2 lh-title">{{ .Title }}</h2>
            <p class="gray f6 mv1">
              {{ .Date.Format "2006-01-02 15:04" }}
              {{ with .Params.end }} – {{ time . | time.Format "15:04" }}{{ end }}
              {{ with .Params.location }} · {{ . }}{{ end }}
            </p>
            <p class="mt2 mb0">{{ .Summary }}</p>
            <span class="dib mt3 btn-primary">查看详情</span>
          </div>
        </a>
      </article>
      {{ end }}
    </div>
  {{ end }}
</main>
{{ end }}